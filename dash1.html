<!DOCTYPE html>
<html lang="zxx">
<head>
    <title>freePCgames</title>
    <meta charset="UTF-8">
    <meta name="description" content="Game Warrior Template">
    <meta name="keywords" content="warrior, game, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->   
    <link href="img/favicon.ico" rel="shortcut icon"/>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="css/animate.css"/>

    <!-- Fallback for older IE versions -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header section -->
    <header class="header-section">
        <div class="container">
            <!-- logo -->
            <a class="site-logo" href="index.html">
                <img src="img/logo.png" alt="">
            </a>
            <div class="user-panel">
                <a href="pages/login.html">Login</a>  /  <a href="pages/sign-up.html">Register</a>
            </div>
            <!-- responsive -->
            <div class="nav-switch">
                <i class="fa fa-bars"></i>
            </div>
            <!-- site menu -->
            <nav class="main-menu">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="review.html">Games</a></li>
                    <li><a href="categories.html">Freebies</a></li>
                    <li><a href="community.html">Forums</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <!-- Header section end -->

    <!-- Supabase JS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

    <script>
        // Initialize Supabase client
        function initializeSupabase() {
            const supabaseUrl = 'https://qvdrfahwyztzpbddoakd.supabase.co'; // Your Supabase URL
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF2ZHJmYWh3eXp0enBiZGRvYWtkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE0NTEwODUsImV4cCI6MjA0NzAyNzA4NX0.R-AqTGj5MsAb-bqE1yP0Ag5ZWMtFIQxgtJ2BM05uJh0'; // Replace with your Supabase anon key
            return supabase.createClient(supabaseUrl, supabaseKey);
        }

        // Handle sign-up process
        function handleSignUp(supabase) {
            const form = document.getElementById('sign-up-form');
            const errorMessage = document.getElementById('error-message');
            const successMessage = document.getElementById('success-message');
            const preloder = document.getElementById('preloder'); // Reference to the loader

            form.addEventListener('submit', async (e) => {
                e.preventDefault(); // Prevent the default form submission

                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;

                // Hide any previous messages
                errorMessage.style.display = 'none';
                successMessage.style.display = 'none';

                try {
                    // Show the loader while waiting for Supabase response
                    preloder.style.display = 'block';

                    const { user, error } = await supabase.auth.signUp({
                        email: email,
                        password: password
                    });

                    if (error) {
                        // Show error message if there's an issue
                        errorMessage.style.display = 'block';
                        console.error('Error signing up:', error.message);
                    } else {
                        // Show success message if the sign-up is successful
                        successMessage.style.display = 'block';
                        console.log('Sign-up successful:', user);

                        // Redirect after 3 seconds
                        setTimeout(function() {
                            window.location.href = 'login.html';  // Redirect to login page after success
                        }, 3000);  // Adjust the delay (3000ms = 3 seconds)
                    }
                } catch (error) {
                    // Handle unexpected errors
                    errorMessage.style.display = 'block';
                    console.error('Unexpected error:', error);
                } finally {
                    // Hide the loader after the process is done
                    preloder.style.display = 'none';
                }
            });
        }

        // Wait until the page is fully loaded before initializing Supabase and form handling
        window.onload = function() {
            const preloder = document.getElementById('preloder'); // Reference to the loader

            // Hide the loader immediately if the page content is already ready
            preloder.style.display = 'none';

            const supabase = initializeSupabase();
            handleSignUp(supabase);
        };
    </script>

    <!-- Tournaments section -->
    <section class="tournaments-section spad">
        <div class="container">
            <div class="tournament-title">Prize draw</div>
            <div class="row">
                <div class="col-md-6">
                    <div class="tournament-item mb-4 mb-lg-0">
                        <div class="ti-notic">Competition time </div>
                        <div class="ti-content">
                            <div class="ti-thumb set-bg" data-setbg="img/tournament/1.jpg"></div>
                            <div class="ti-text">
                                <h4>Halo</h4>
                                <ul>
                                    <li><span>Tournament Beggins:</span> Dec 17, 2024</li>
                                    <li><span>Tounament Start Time:</span> 7pm</li>
                                    <li><span>Participants:</span> 4 </li>
                                    <li><span>Tournament Author:</span> Admin</li>
                                </ul>
                                <p><span>Prizes:</span> 1st: $5k coins, 2nd: $2.5k, 3rd: $1k</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="tournament-item">
                        <div class="ti-notic">Premium Tournament</div>
                        <div class="ti-content">
                            <div class="ti-thumb set-bg" data-setbg="img/tournament/2.jpg"></div>
                            <div class="ti-text">
                                <h4>Fortnite</h4>
                                <ul>
                                    <li><span>Tournament Beggins:</span> N/A</li>
                                    <li><span>Tounament Ends:</span> N/A</li>
                                    <li><span>Participants:</span> 0 teams</li>
                                    <li><span>Tournament Author:</span> Admin</li>
                                </ul>
                                <p><span>Prizes:</span> 1st= $5k coins, 2nd: $2.5k, 3rd: $1k</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Tournaments section end -->

    <!-- Footer top section -->
    <section class="footer-top-section">
        <div class="container">
            <div class="footer-top-bg">
                <img src="img/footer-top-bg.png" alt="">
            </div>
            <div class="footer-top-content">
                <h2>Exclusive Giveaways!</h2>
                <a href="giveaway.html" class="site-btn">Claim Your Prize!</a>
            </div>
        </div>
    </section>
    <!-- Footer top section end -->

    <!-- Footer bottom section -->
    <footer class="footer-bottom">
        <div class="container">
            <div class="footer-bottom-content">
                <p>&copy; 2024 <a href="#">freePCgames</a>. All Rights Reserved.</p>
            </div>
        </div>
    </footer>
    <!-- Footer bottom section end -->

    <!-- Scripts -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
