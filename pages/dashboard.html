<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>freePCgames</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/dash.css">
    <link rel="stylesheet" href="dash.css">
    <link rel="stylesheet" href="pages/dash.css">
    <link rel="stylesheet" href="/pages/dash.css">

    <!-- External Fonts/Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

    <style>
        /* Add this CSS for the buttons styling */
        nav .menu a {
            padding: 8px 15px;
            color: white;
            font-size: 16px;
            text-decoration: none;
            border-radius: 5px;
            display: flex;
            align-items: center;
            margin-left: 10px;
            transition: background-color 0.3s ease;
        }

        /* Style for Login Button */
        nav .menu a.login-btn {
            background-color: #4CAF50;
        }

        nav .menu a.login-btn:hover {
            background-color: #45a049;
        }

        nav .menu a.login-btn span {
            margin-right: 5px;
        }

        /* Style for Register Button */
        nav .menu a.register-btn {
            background-color: #f39c12;
        }

        nav .menu a.register-btn:hover {
            background-color: #e67e22;
        }

        nav .menu a.register-btn span {
            margin-right: 5px;
        }

        /* Style for Account Button */
        nav .menu a.account-btn {
            background-color: #3498db;
        }

        nav .menu a.account-btn:hover {
            background-color: #2980b9;
        }

        nav .menu a.account-btn span {
            margin-right: 5px;
        }

        /* Hamburger Menu */
        .hamburger {
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
        }

        .hamburger div {
            height: 3px;
            background-color: white;
        }

        /* Menu Toggle */
        .menu.active {
            display: block;
        }

        .menu {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            width: 100%;
        }
    </style>

    <script>
        function toggleMenu() {
            const menu = document.querySelector('.menu');
            menu.classList.toggle('active');
        }
    </script>
</head>

<body>
    <div class="container">
        <!-- Navigation Bar -->
        <nav>
            <div class="logo">free.PC.games</div>
            <div class="hamburger" onclick="toggleMenu()">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="menu">
                <a href="https://www.freepcgames.online/">Home</a>
                <a href="pages/games.html">Browser games</a>
                <a href="pages/free-steam-games.html">Steam games</a>
                <a href="pages/store.html">Premium games</a>
                <a href="pages/About-us.html">About</a>
                <a href="pages/store.html">Store</a>
                <a href="pages/login.html" class="login-btn"><span>üë§</span> Login</a>
                <a href="pages/sign-up.html" class="register-btn"><span>üìù</span> Register</a>
                <a href="pages/dashboard.html" class="account-btn"><span>üè†</span> Account</a>
            </div>
        </nav>

        <!-- Coin Display -->
        <div class="coin-display" id="coin-display">
            <span class="coin-icon" id="coin-icon">üí∞</span>
            <span class="coin-amount" id="coin-amount">$<span id="coin-value">50</span> Coins</span>
            <span class="coin-text" id="coin-text">Earn your rewards!</span>
        </div>

        <div id="dashboard" class="dashboard-container">
            <h1>Welcome, <span id="username"></span></h1>

            <div class="user-info">
                <div class="greeting">
                </div>
                <p>üéÆ <strong>Your task dashboard is ready!</strong> Complete tasks to earn coins, and exchange them for exciting rewards!</p>
                <p>üóìÔ∏è New tasks are added regularly. Check back often to maximize your rewards!</p>
                <p><i class="fas fa-cogs"></i> <strong>Manage your tasks:</strong> Mark them as complete to unlock rewards.</p>
                <p><i class="fas fa-trophy"></i> <strong>Earn Coins:</strong> Completing tasks and achieving milestones will reward you with coins.</p>
                <p><i class="fas fa-exchange-alt"></i> <strong>Trade Coins for Game Codes:</strong> Use your earned coins to unlock special game codes!</p>

                <button type="submit" class="submit-btn">Go to tasks</button>
            </div>

            <!-- Task Boxes -->
            <div class="task-boxes">
                <div class="task-box" id="task1">
                    <h3><i class="fas fa-chalkboard-teacher"></i> Complete Tutorial</h3>
                    <p>Finish the onboarding tutorial.</p>
                    <button onclick="toggleTask('task1')">Mark as Complete</button>
                </div>
                <div class="task-box" id="task2">
                    <h3><i class="fas fa-briefcase"></i> Finish Project</h3>
                    <p>Work on the final project and submit.</p>
                    <button onclick="toggleTask('task2')">Mark as Complete</button>
                </div>
                <div class="task-box" id="task3">
                    <h3><i class="fas fa-user-edit"></i> Update Profile</h3>
                    <p>Update your profile with the latest information.</p>
                    <button onclick="toggleTask('task3')">Mark as Complete</button>
                </div>
            </div>

            <button class="logout-btn" id="logoutButton">Log Out</button>
        </div>

        <div id="claim-box" class="claim-box" style="display: none;">
            <h3>Claim 50 Coins for Signing In Today!</h3>
        </div>

        <script>
            // Local storage to track if the user has claimed today
            function checkDailyClaim() {
                const lastClaimed = localStorage.getItem('lastClaimed');
                const currentTime = new Date().getTime();

                // Show the claim box if 24 hours have passed since last claim
                if (!lastClaimed || currentTime - lastClaimed >= 86400000) {
                    document.getElementById('claim-box').style.display = 'block';
                }
            }

            // Function to handle coin claim
            document.getElementById('claim-box').addEventListener('click', function () {
                const coinsElement = document.getElementById('coins');
                let currentCoins = parseInt(coinsElement.textContent.replace('$COINS: ', ''));
                currentCoins += 50; // Add 50 coins
                coinsElement.textContent = `$COINS: ${currentCoins}`;
                coinsElement.classList.add('glow-green'); // Green glow effect on coin increase

                // Hide the claim box and store the claim time in localStorage
                localStorage.setItem('lastClaimed', new Date().getTime());
                document.getElementById('claim-box').style.display = 'none';

                setTimeout(() => {
                    coinsElement.classList.remove('glow-green'); // Remove the glow after 1 second
                }, 1000);
            });

            // Check if the user has already claimed the prize when the page loads
            window.onload = checkDailyClaim;

            // Task toggle function to mark tasks as complete/incomplete
            function toggleTask(taskId) {
                const taskElement = document.getElementById(taskId);
                taskElement.classList.toggle("completed");
            }

            // Handle logout action
            document.getElementById("logoutButton").addEventListener('click', async () => {
                const supabase = initializeSupabase();
                const { error } = await supabase.auth.signOut();
                if (error) {
                    console.error('Error logging out:', error.message);
                } else {
                    window.location.href = 'pages/login.html';  // Redirect to login page after logout
                }
            });

        </script>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-container">
                <div class="footer-left">
                    <p>&copy; 2025 <span>freePCgames</span></p>
                </div>
                <div class="footer-right">
                    <ul>
                        <li><a href="pages/about-us">About Us</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
